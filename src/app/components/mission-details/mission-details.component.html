<div class="container">
	<div style="position: relative">
		<div class="not-allowed-text" *ngIf="!(discordUser && discordUser?.role)">
			You must join our Discord server and complete the welcoming process
			to upload missions!
		</div>

		<div class="column" [class.not-allowed-overlay]="!(discordUser && discordUser?.role)">
			<div class="row">
				<div class="col-5 col-md-5>">
					<img class="img-details" [src]="missionsService.getImage(mission)" alt="Mission image">
				</div>
				<div class="col-7">
					<div class="row mb-4">
						<div class="col">
							<div class="details-label">Name</div>
							<div class="details-value">{{ mission?.name }}</div>
						</div>
						<div class="col">
							<div class="details-label">Author</div>
							<div class="details-value">{{ mission?.authorName }}</div>
						</div>
						<div class="col">
							<div class="details-label">Map</div>
							<div class="details-value">{{ mission?.terrain }}</div>
						</div>
					</div>
					<div class="row mb-4">
						<div class="col">
							<div class="details-label">Type</div>
							<div class="details-value">{{ mission?.type }}</div>
						</div>
						<div class="col">
							<div class="details-label">Min.</div>
							<div class="details-value">{{ mission?.size.min }}</div>
						</div>
						<div class="col">
							<div class="details-label">Max.</div>
							<div class="details-value">{{ mission?.size.max }}</div>
						</div>
					</div>
					<div class="row mb-4">
						<div class="col">
							<div class="details-label">Time</div>
							<div class="details-value">{{ mission?.timeOfDay }}</div>
						</div>
						<div class="col">
							<div class="details-label">Era</div>
							<div class="details-value">{{ mission?.era }}</div>
						</div>
						<div class="col">
							<div class="details-label">Version</div>
							<div class="details-value">{{ mission?.version }}</div>
						</div>
					</div>
					<div class="row mb-4">
						<div class="col-12">
							<div class="details-label">Tags</div>
							<mat-chip-list>
								<mat-chip *ngFor="let tag of mission?.tags">
									{{tag}}
								</mat-chip>
							</mat-chip-list>
						</div>
					</div>
					<div class="row mb-4">
						<div class="col-12">
							<div class="details-label">Description</div>
							<div class="details-value">{{ mission?.description }}</div>
						</div>
					</div>
				</div>
			</div>
			<!--<div class="col-sm-3 col-btn">
					<button mat-flat-button color="primary" matTooltip="Download">
						<mat-icon>get_app</mat-icon>
					</button>
				</div>
				<div class="col-sm-3 col-btn">
					<button mat-flat-button color="accent" (click)="updateMission()" matTooltip="Update mission">
						<mat-icon>upgrade</mat-icon>
					</button>
				</div>-->
		</div>
		<!--Updates-->
		<div class="row mb-4">
			<div class="table-header">
				<div class="spacer"></div>
				<div class="table-title">Updates</div>
				<div class="table-button-container">
					<button mat-flat-button class="table-button" color="accent" (click)="updateMission()"
						matTooltip="Update mission">
						<mat-icon>upload_file</mat-icon>
					</button>
				</div>
			</div>
			<table mat-table [dataSource]="this.mission?.updates" class="matTable" matSort style="width: 100%;">
				<ng-container matColumnDef="date">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Date </th>
					<td mat-cell *matCellDef="let element">{{missionsService.getDate(element.date)}}</td>
				</ng-container>
				<ng-container matColumnDef="version">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Version </th>
					<td mat-cell *matCellDef="let element">{{element.version}}</td>
				</ng-container>
				<ng-container matColumnDef="authorName">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Author </th>
					<td mat-cell *matCellDef="let element">{{element.authorName}}</td>
				</ng-container>
				<ng-container matColumnDef="status">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
					<td mat-cell *matCellDef="let element">
						<div class="row">
							<div class="col"></div>
							<div class="col-2">
								<div class="table-title">Main</div>
								<div [ngSwitch]="element.main">
									<div *ngSwitchCase="true">
										<mat-icon class="green-icon">check</mat-icon>
									</div>
									<div *ngSwitchDefault>
										<mat-icon class="red-icon">close</mat-icon>
									</div>
								</div>
							</div>
							<div class="col-2">
								<div class="table-title">Test</div>
								<div [ngSwitch]="element.test">
									<div *ngSwitchCase="true">
										<mat-icon class="green-icon">check</mat-icon>
									</div>
									<div *ngSwitchDefault>
										<mat-icon class="red-icon">close</mat-icon>
									</div>
								</div>
							</div>
							<div class="col-2">
								<div class="table-title">Ready</div>
								<div [ngSwitch]="element.ready">
									<div *ngSwitchCase="true">
										<mat-icon class="green-icon">check</mat-icon>
									</div>
									<div *ngSwitchDefault>
										<mat-icon class="red-icon">close</mat-icon>
									</div>
								</div>
							</div>
							<div class="col-2">
								<div class="table-title">Archive</div>
								<div [ngSwitch]="element.archive">
									<div *ngSwitchCase="true">
										<mat-icon class="green-icon">check</mat-icon>
									</div>
									<div *ngSwitchDefault>
										<mat-icon class="red-icon">close</mat-icon>
									</div>
								</div>
							</div>
							<div class="col"></div>
						</div>
					</td>
				</ng-container>
				<ng-container matColumnDef="buttons">
					<th mat-header-cell class="table-header-action" *matHeaderCellDef mat-sort-header>Actions</th>
					<td mat-cell *matCellDef="let element">
						<button mat-flat-button color="primary" matTooltip="Download">
							<mat-icon>download</mat-icon>
						</button>
						<button mat-flat-button color="primary" matTooltip="Changelog">
							<mat-icon>article</mat-icon>
						</button>
						<button mat-flat-button color="primary" matTooltip="Actions">
							<mat-icon>keyboard_arrow_right</mat-icon>
						</button>
					</td>
				</ng-container>
				<tr mat-header-row *matHeaderRowDef="updateColumns; sticky: true"></tr>
				<tr mat-row *matRowDef="let row; columns: updateColumns;"></tr>
			</table>
		</div>
		<div class="row mb-4">
			<div class="table-header">
				<div class="spacer"></div>
				<div class="table-title">Reports</div>
				<div class="table-button-container">
					<button mat-flat-button class="table-button" color="accent" (click)="updateMission()"
						matTooltip="Update mission">
						<mat-icon>bug_report</mat-icon>
					</button>
				</div>
			</div>
			<table mat-table [dataSource]="this.mission?.reports" class="matTable" matSort style="width: 100%;">
				<ng-container matColumnDef="date">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Date </th>
					<td mat-cell *matCellDef="let element">{{missionsService.getDate(element.date)}}</td>
				</ng-container>
				<ng-container matColumnDef="version">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Version </th>
					<td mat-cell *matCellDef="let element">{{element.version}}</td>
				</ng-container>
				<ng-container matColumnDef="authorName">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Author </th>
					<td mat-cell *matCellDef="let element">{{element.authorName}}</td>
				</ng-container>
				<ng-container matColumnDef="buttons">
					<th mat-header-cell class="table-header-action" *matHeaderCellDef mat-sort-header>Actions</th>
					<td mat-cell *matCellDef="let element">
						<button mat-flat-button color="primary" matTooltip="Download">
							<mat-icon>download</mat-icon>
						</button>
						<button mat-flat-button color="primary" matTooltip="Changelog">
							<mat-icon>article</mat-icon>
						</button>
						<button mat-flat-button color="primary" matTooltip="Actions">
							<mat-icon>keyboard_arrow_right</mat-icon>
						</button>
					</td>
				</ng-container>
				<tr mat-header-row *matHeaderRowDef="reportColumns; sticky: true"></tr>
				<tr mat-row *matRowDef="let row; columns: reportColumns;"></tr>
				<tr class="mat-row" *matNoDataRow>
					<td class="mat-cell" colspan="4">No Reports</td>
				</tr>
			</table>
		</div>
		<div class="row mb-4">
			<div class="table-header">
				<div class="spacer"></div>
				<div class="table-title">Reviews</div>
				<div class="table-button-container">
					<button mat-flat-button class="table-button" color="accent" (click)="updateMission()"
						matTooltip="Update mission">
						<mat-icon>note_add</mat-icon>
					</button>
				</div>
			</div>
			<table mat-table [dataSource]="this.mission?.reviews" class="matTable" matSort style="width: 100%;">
				<ng-container matColumnDef="date">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Date </th>
					<td mat-cell *matCellDef="let element">{{missionsService.getDate(element.date)}}</td>
				</ng-container>
				<ng-container matColumnDef="version">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Version </th>
					<td mat-cell *matCellDef="let element">{{element.version}}</td>
				</ng-container>
				<ng-container matColumnDef="authorName">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Author </th>
					<td mat-cell *matCellDef="let element">{{element.authorName}}</td>
				</ng-container>
				<ng-container matColumnDef="buttons">
					<th mat-header-cell class="table-header-action" *matHeaderCellDef mat-sort-header>Actions</th>
					<td mat-cell *matCellDef="let element">
						<button mat-flat-button matTooltip="Download">
							<mat-icon>download</mat-icon>
						</button>
						<button mat-flat-button matTooltip="Changelog">
							<mat-icon>article</mat-icon>
						</button>
						<button mat-flat-button matTooltip="Actions">
							<mat-icon>keyboard_arrow_right</mat-icon>
						</button>
					</td>
				</ng-container>
				<tr mat-header-row *matHeaderRowDef="reviewColumns; sticky: true"></tr>
				<tr mat-row *matRowDef="let row; columns: reviewColumns;"></tr>
				<tr class="mat-row" *matNoDataRow>
					<td class="mat-cell" colspan="4">No Reviews</td>
				</tr>
			</table>
		</div>
	</div>
</div>